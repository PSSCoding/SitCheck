(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{473:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(5155),l=s(2115),i=s(2619),n=s.n(i),r=s(6991),c=s(2723),d=s(4035),o=s(9386),p=s(3581),m=s(2708);let x={Lesesäle:{gradient:"from-sky-400 via-sky-500 to-sky-600",accent:"text-sky-600",pieFill:"#0ea5e9"},Gruppenräume:{gradient:"from-amber-400 via-orange-400 to-orange-500",accent:"text-orange-500",pieFill:"#f97316"},Seitenbänke:{gradient:"from-emerald-400 via-teal-400 to-teal-500",accent:"text-emerald-500",pieFill:"#10b981"}},u={Lesesäle:{today:.68,tomorrow:.54},Gruppenräume:{today:.58,tomorrow:.48},Seitenbänke:{today:.5,tomorrow:.36}},h=["live","today","tomorrow"],g={live:"Live",today:"Heute",tomorrow:"Morgen"},f=e=>{let[t,s]=e.split(":").map(Number);return 60*t+s},b=e=>new Date(e).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"});function y(){let{bookings:e}=(0,m.dp)(),[t,s]=(0,l.useState)({}),i=Object.entries(p.L.reduce((e,t)=>(e[t.type]||(e[t.type]=[]),e[t.type].push(t),e),{})),y=p.L.reduce((e,t)=>e+t.people,0),j=p.L.reduce((e,t)=>e+t.capacity,0),v=Math.max(j-y,0),N=j?Math.round(y/j*100):0,w=(0,l.useMemo)(()=>{let t=new Date;return e.filter(e=>new Date(e.endDateTime)>=t).map(e=>({...e,start:b(e.startDateTime),end:b(e.endDateTime)}))},[e]),k=(0,l.useMemo)(()=>[...w].sort((e,t)=>f(e.start)-f(t.start)),[w]),S=k[0],L=k.slice(1),D=!!S,M=(0,l.useMemo)(()=>S?new Date(S.startDateTime).toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"}):"",[S]),G=i.reduce((e,t)=>{let[s,a]=t,l=a.reduce((e,t)=>(e.people+=t.people,e.capacity+=t.capacity,e),{people:0,capacity:0});return e[s]=l,e},{});return(0,a.jsxs)("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-10 pb-6 sm:gap-12",children:[(0,a.jsxs)("section",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsx)("div",{className:"rounded-4xl bg-gradient-to-br from-sky-100 via-sky-50 to-white p-6 shadow-sm ring-1 ring-sky-100 sm:p-8",children:D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-sky-700",children:"Meine n\xe4chste Buchung"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 sm:text-3xl",children:S.roomName}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-slate-600",children:[S.start," – ",S.end," Uhr \xb7 ",S.category]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-slate-500",children:[(0,a.jsxs)("span",{className:"rounded-full bg-sky-200/50 px-3 py-1 font-medium text-sky-700",children:["Status: ",S.status]}),(0,a.jsx)("span",{className:"rounded-full bg-white px-3 py-1 font-medium text-slate-700",children:M})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 text-sm text-slate-600",children:[(0,a.jsxs)(n(),{href:"/bookings",className:"inline-flex items-center justify-center gap-2 rounded-full bg-sky-500 px-4 py-2 font-semibold text-white shadow-sm transition hover:bg-sky-600",children:["Buchung verwalten",(0,a.jsx)("span",{"aria-hidden":"true",children:"→"})]}),(0,a.jsx)(n(),{href:"/bookings/new",className:"inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 font-semibold text-slate-700 shadow-sm transition hover:border-sky-200 hover:text-sky-700",children:"Neuen Raum suchen"})]})]}),L.length>0&&(0,a.jsx)("div",{className:"mt-6 grid gap-3 sm:grid-cols-2",children:L.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-3xl border border-slate-200 bg-white/70 px-4 py-3 text-sm text-slate-600 shadow-inner",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.roomName}),(0,a.jsxs)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:[e.start," – ",e.end," Uhr \xb7 ",e.category]})]}),(0,a.jsx)("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600",children:e.status})]},e.id))})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center text-slate-600",children:[(0,a.jsx)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-sky-700",children:"Keine offenen Buchungen"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-slate-900 sm:text-2xl",children:"Starte deine erste Reservierung"}),(0,a.jsx)("p",{className:"max-w-md text-sm",children:"Aktuell sind keine Buchungen geplant. Du kannst jederzeit einen Raum ausw\xe4hlen und eine Anfrage anlegen."}),(0,a.jsxs)(n(),{href:"/bookings/new",className:"inline-flex items-center gap-2 rounded-full bg-sky-500 px-4 py-2 font-semibold text-white shadow-sm transition hover:bg-sky-600",children:["Jetzt unverbindlich buchen",(0,a.jsx)("span",{"aria-hidden":"true",children:"→"})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3 text-sm text-slate-600 sm:grid-cols-3",children:[{label:"Aktive R\xe4ume",value:p.L.length},{label:"Personen aktuell",value:y},{label:"Freie Pl\xe4tze",value:v},{label:"\xd8 Auslastung",value:"".concat(N,"%")}].map(e=>(0,a.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white px-5 py-4 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:e.label}),(0,a.jsx)("p",{className:"mt-3 text-2xl font-semibold text-slate-900",children:e.value})]},e.label))})]}),(0,a.jsx)("section",{className:"space-y-8",children:i.map(e=>{var l,i,p,m;let[f,b]=e,y=G[f],j=null!=(i=x[f])?i:{gradient:"from-slate-400 via-slate-500 to-slate-600",accent:"text-slate-600",pieFill:"#64748b"},v=null!=(p=t[f])?p:"live",N=null!=(m=null==(l=u[f])?void 0:l[v])?m:.6,w=Math.min("live"===v?y.people:Math.round(y.capacity*N),y.capacity),k=Math.max(y.capacity-w,0),S=y.capacity?Math.round(w/y.capacity*100):0,L=[{name:"Belegt",value:w},{name:"Frei",value:k}];return(0,a.jsxs)("article",{className:"rounded-4xl border border-slate-200 bg-white/90 p-6 shadow-sm backdrop-blur sm:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r ".concat(j.gradient," px-4 py-1 text-xs font-semibold uppercase tracking-wide text-white shadow"),children:f}),(0,a.jsxs)("span",{className:"text-xs font-medium uppercase tracking-wide text-slate-500",children:[b.length," R\xe4ume"]})]}),(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["Aggregierte Auslastung aller ",f," im \xdcberblick."]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs text-slate-500",children:[(0,a.jsxs)("span",{children:["Belegt: ",(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:w})]}),(0,a.jsxs)("span",{children:["Kapazit\xe4t: ",(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:y.capacity})]}),(0,a.jsxs)("span",{children:["Frei: ",(0,a.jsx)("span",{className:"font-semibold text-slate-900",children:k})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 sm:flex-row",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-600",children:h.map(e=>{let t=v===e;return(0,a.jsx)("button",{type:"button",onClick:()=>s(t=>({...t,[f]:e})),className:"rounded-full px-2.5 py-1 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 ".concat(t?"bg-sky-500 text-white shadow-sm":"text-slate-500 hover:text-slate-700"),"aria-pressed":t,children:g[e]},e)})}),(0,a.jsxs)("div",{className:"relative h-28 w-28",children:[(0,a.jsx)(r.u,{width:"100%",height:"100%",children:(0,a.jsx)(c.r,{children:(0,a.jsx)(d.F,{data:L,dataKey:"value",innerRadius:40,outerRadius:56,startAngle:90,endAngle:450,children:L.map((e,t)=>(0,a.jsx)(o.f,{fill:0===t?j.pieFill:"#e2e8f0"},"".concat(f,"-pie-").concat(e.name)))})})}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"Auslastung"}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-slate-900",children:[S,"%"]})]})]})]})]}),(0,a.jsx)("div",{className:"-mx-5 mt-6 overflow-x-auto pb-4",children:(0,a.jsx)("div",{className:"flex gap-4 px-1 sm:px-5",children:b.map(e=>{let t=e.people/e.capacity,s=0===t?{label:"Leer",badge:"bg-slate-200 text-slate-800"}:t<=1/3?{label:"Gering",badge:"bg-emerald-500 text-white"}:t<=2/3?{label:"Mittel",badge:"bg-amber-400 text-slate-900"}:t<1?{label:"Hoch",badge:"bg-orange-500 text-white"}:{label:"Voll",badge:"bg-rose-500 text-white"},l=Math.round(e.people/e.capacity*100);return(0,a.jsxs)(n(),{href:"/rooms/".concat(e.id),className:"group flex min-w-[240px] snap-start flex-col gap-4 rounded-3xl border border-slate-200 bg-gradient-to-br from-white via-white to-slate-50 p-5 shadow-sm transition hover:-translate-y-1 hover:shadow-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:e.type}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:e.name})]}),(0,a.jsx)("span",{className:"rounded-full px-3 py-1 text-xs font-semibold ".concat(s.badge),children:s.label})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs text-slate-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Personen"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.people})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Kapazit\xe4t"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e.capacity})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Auslastung"}),(0,a.jsxs)("p",{className:"text-sm font-semibold text-slate-900",children:[l,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Freie Pl\xe4tze"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:Math.max(e.capacity-e.people,0)})]})]}),(0,a.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r ".concat(j.gradient),style:{width:"".concat(Math.min(l,100),"%")},"aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold text-sky-600",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:["Details ansehen",(0,a.jsx)("span",{"aria-hidden":"true",className:"transition-transform group-hover:translate-x-1",children:"→"})]}),(0,a.jsx)("span",{className:"text-slate-500",children:g[v]})]})]},e.id)})})})]},f)})})]})}},2708:(e,t,s)=>{"use strict";s.d(t,{dp:()=>d,lK:()=>c});var a=s(5155),l=s(2115);let i=(0,l.createContext)(null),n=[7,3,11],r=()=>[{id:1,roomId:7,roomName:"Gruppenraum B",category:"Gruppenr\xe4ume",dayOffset:0,hour:13,minute:30,durationMinutes:90,status:"Best\xe4tigt",notes:"Projektbesprechung mit dem Tutorium."},{id:2,roomId:3,roomName:"Lesesaal 3",category:"Leses\xe4le",dayOffset:1,hour:9,minute:0,durationMinutes:120,status:"Option",notes:"Pr\xfcfungsvorbereitung Informatik."},{id:3,roomId:11,roomName:"Seitenbank 1",category:"Seitenb\xe4nke",dayOffset:-1,hour:18,minute:0,durationMinutes:60,status:"Abgeschlossen",notes:"Konzentrationsphase vor dem Vortrag."}].map(e=>{let t=new Date;t.setHours(0,0,0,0),t.setDate(t.getDate()+e.dayOffset),t.setHours(e.hour,e.minute,0,0);let s=new Date(t.getTime()+60*e.durationMinutes*1e3);return{id:e.id,roomId:e.roomId,roomName:e.roomName,category:e.category,startDateTime:t.toISOString(),endDateTime:s.toISOString(),status:e.status,notes:e.notes}});function c(e){let{children:t}=e,[s,c]=(0,l.useState)(n),[d,o]=(0,l.useState)(r),p=(0,l.useCallback)(e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),m=(0,l.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e))},[]),x=(0,l.useMemo)(()=>({favorites:s,toggleFavorite:p,bookings:d,setBookings:o,cancelBooking:m}),[s,p,d,o,m]);return(0,a.jsx)(i.Provider,{value:x,children:t})}function d(){let e=(0,l.useContext)(i);if(!e)throw Error("useAppData must be used within an AppDataContext provider");return e}},3231:(e,t,s)=>{Promise.resolve().then(s.bind(s,473))},3581:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});let a=[{id:1,name:"Lesesaal 1",people:5,capacity:50,type:"Leses\xe4le"},{id:2,name:"Lesesaal 2",people:20,capacity:40,type:"Leses\xe4le"},{id:3,name:"Lesesaal 3",people:12,capacity:40,type:"Leses\xe4le"},{id:4,name:"Lesesaal 4",people:30,capacity:50,type:"Leses\xe4le"},{id:5,name:"Lesesaal 5",people:10,capacity:50,type:"Leses\xe4le"},{id:6,name:"Gruppenraum A",people:8,capacity:10,type:"Gruppenr\xe4ume"},{id:7,name:"Gruppenraum B",people:10,capacity:10,type:"Gruppenr\xe4ume"},{id:8,name:"Gruppenraum C",people:4,capacity:10,type:"Gruppenr\xe4ume"},{id:9,name:"Gruppenraum D",people:9,capacity:12,type:"Gruppenr\xe4ume"},{id:10,name:"Gruppenraum E",people:7,capacity:10,type:"Gruppenr\xe4ume"},{id:11,name:"Seitenbank 1",people:2,capacity:4,type:"Seitenb\xe4nke"},{id:12,name:"Seitenbank 2",people:3,capacity:4,type:"Seitenb\xe4nke"},{id:13,name:"Seitenbank 3",people:1,capacity:4,type:"Seitenb\xe4nke"},{id:14,name:"Seitenbank 4",people:4,capacity:4,type:"Seitenb\xe4nke"},{id:15,name:"Seitenbank 5",people:2,capacity:4,type:"Seitenb\xe4nke"}]}},e=>{e.O(0,[619,519,441,255,358],()=>e(e.s=3231)),_N_E=e.O()}]);