(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{2708:(e,t,s)=>{"use strict";s.d(t,{dp:()=>d,lK:()=>o});var a=s(5155),l=s(2115);let r=(0,l.createContext)(null),i=[7,3,11],n=()=>[{id:1,roomId:7,roomName:"Gruppenraum B",category:"Gruppenr\xe4ume",dayOffset:0,hour:13,minute:30,durationMinutes:90,status:"Best\xe4tigt",notes:"Projektbesprechung mit dem Tutorium."},{id:2,roomId:3,roomName:"Lesesaal 3",category:"Leses\xe4le",dayOffset:1,hour:9,minute:0,durationMinutes:120,status:"Option",notes:"Pr\xfcfungsvorbereitung Informatik."},{id:3,roomId:11,roomName:"Seitenbank 1",category:"Seitenb\xe4nke",dayOffset:-1,hour:18,minute:0,durationMinutes:60,status:"Abgeschlossen",notes:"Konzentrationsphase vor dem Vortrag."}].map(e=>{let t=new Date;t.setHours(0,0,0,0),t.setDate(t.getDate()+e.dayOffset),t.setHours(e.hour,e.minute,0,0);let s=new Date(t.getTime()+60*e.durationMinutes*1e3);return{id:e.id,roomId:e.roomId,roomName:e.roomName,category:e.category,startDateTime:t.toISOString(),endDateTime:s.toISOString(),status:e.status,notes:e.notes}});function o(e){let{children:t}=e,[s,o]=(0,l.useState)(i),[d,c]=(0,l.useState)(n),x=(0,l.useCallback)(e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),m=(0,l.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),u=(0,l.useMemo)(()=>({favorites:s,toggleFavorite:x,bookings:d,setBookings:c,cancelBooking:m}),[s,x,d,c,m]);return(0,a.jsx)(r.Provider,{value:u,children:t})}function d(){let e=(0,l.useContext)(r);if(!e)throw Error("useAppData must be used within an AppDataContext provider");return e}},2872:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var a=s(5155),l=s(2619),r=s.n(l),i=s(6991),n=s(2723),o=s(4035),d=s(9386),c=s(6324),x=s(8425),m=s(7734),u=s(3697),h=s(232),p=s(8716),f=s(9339),g=s(2708);let b={Lesesäle:{gradient:"from-sky-400 via-sky-500 to-sky-600",pieFill:"#0ea5e9"},Gruppenräume:{gradient:"from-amber-400 via-orange-400 to-orange-500",pieFill:"#f97316"},Seitenbänke:{gradient:"from-emerald-400 via-teal-400 to-teal-500",pieFill:"#10b981"}},j=["08:00","10:00","12:00","14:00","16:00","18:00","20:00","22:00"],y=[.25,.42,.58,.74,.85,.7,.55,.38];function v(e){var t,s;let{room:l}=e,{favorites:v,toggleFavorite:w}=(0,g.dp)(),N=v.includes(null!=(t=null==l?void 0:l.id)?t:-1);if(!l)return null;let k=null!=(s=b[l.type])?s:{gradient:"from-slate-400 via-slate-500 to-slate-600",pieFill:"#38bdf8"},M=Math.max(l.capacity-l.people,0),D=Math.round(l.people/l.capacity*100),P=[{name:"Belegt",value:l.people},{name:"Frei",value:M}],S=new Date,C=S.getHours(),L=j.map((e,t)=>{let s=Number(e.split(":")[0]),a=t===j.length-1?24:Number(j[t+1].split(":")[0]),r="future";C>=a?r="past":C>=s&&(r="current");let i=Math.min(l.capacity,Math.round(l.capacity*y[t])),n="current"===r?l.people:"past"===r?Math.min(i,Math.round(.9*i)):0,o=Math.max(i-n,0);return{time:e,live:n,forecast:o,expected:i,phase:r,isCurrent:"current"===r}}),F=[{offsetHours:1,durationMinutes:60,load:.45},{offsetHours:2,durationMinutes:60,load:.6},{offsetHours:3,durationMinutes:90,load:.4}].map((e,t)=>{let s=new Date(S.getTime()+60*e.offsetHours*6e4),a=new Date(s.getTime()+60*e.durationMinutes*1e3),r=Math.min(l.capacity,Math.round(l.capacity*e.load)),i=Math.max(l.capacity-r,0);return{id:t,start:s.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),end:a.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),expected:r,free:i}}),I=S.toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"}),O=(()=>{let e=l.people/l.capacity;return 0===e?{label:"Leer",color:"bg-slate-200 text-slate-800"}:e<=1/3?{label:"Gering",color:"bg-emerald-500 text-white"}:e<=2/3?{label:"Mittel",color:"bg-amber-400 text-slate-900"}:e<1?{label:"Hoch",color:"bg-orange-500 text-white"}:{label:"Voll",color:"bg-rose-500 text-white"}})();return(0,a.jsxs)("div",{className:"mx-auto flex w-full max-w-4xl flex-col gap-8 px-4 pb-8 pt-6 sm:px-6 sm:pt-8",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 text-sm text-sky-600",children:(0,a.jsxs)(r(),{href:"/",className:"inline-flex items-center gap-2 rounded-full border border-sky-200 bg-white px-4 py-2 font-medium shadow-sm transition hover:border-sky-300 hover:text-sky-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-400",children:[(0,a.jsx)("span",{"aria-hidden":"true",children:"←"}),"Zur \xdcbersicht"]})}),(0,a.jsxs)("section",{className:"rounded-3xl bg-gradient-to-br from-white via-slate-50 to-sky-50 p-6 shadow-sm ring-1 ring-sky-100 sm:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("span",{className:"inline-flex w-fit items-center gap-2 rounded-full bg-gradient-to-r ".concat(k.gradient," px-4 py-1 text-xs font-semibold uppercase tracking-wide text-white shadow"),children:l.type}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 sm:text-3xl",children:l.name}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-slate-600",children:["Live-Auslastung und Prognose f\xfcr den heutigen Tag – aktualisiert ",I,"."]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-slate-500",children:[(0,a.jsx)("span",{className:"rounded-full px-3 py-1 font-semibold ".concat(O.color),children:O.label}),(0,a.jsxs)("span",{className:"rounded-full bg-white px-3 py-1 font-semibold text-slate-700",children:[D,"% ausgelastet"]}),(0,a.jsxs)("span",{className:"rounded-full bg-white px-3 py-1 font-semibold text-slate-700",children:[M," freie Pl\xe4tze"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm",children:[(0,a.jsx)("button",{className:"inline-flex items-center gap-2 rounded-full bg-sky-500 px-4 py-2 font-semibold text-white shadow-sm transition hover:bg-sky-600",children:"Jetzt buchen"}),(0,a.jsx)("button",{type:"button",onClick:()=>w(l.id),"aria-pressed":N,className:"inline-flex items-center gap-2 rounded-full border px-4 py-2 font-semibold shadow-sm transition ".concat(N?"border-rose-200 bg-rose-50 text-rose-600 hover:border-rose-300 hover:text-rose-700":"border-slate-200 bg-white text-slate-700 hover:border-sky-200 hover:text-sky-700"),children:N?"Gemerkter Raum":"Merken"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{className:"relative h-32 w-32",children:[(0,a.jsx)(i.u,{width:"100%",height:"100%",children:(0,a.jsx)(n.r,{children:(0,a.jsx)(o.F,{data:P,dataKey:"value",innerRadius:48,outerRadius:64,startAngle:90,endAngle:450,children:P.map((e,t)=>(0,a.jsx)(d.f,{fill:0===t?k.pieFill:"#e2e8f0"},"detail-pie-".concat(e.name)))})})}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"Belegung"}),(0,a.jsxs)("span",{className:"text-xl font-semibold text-slate-900",children:[D,"%"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-3 text-sm text-slate-600",children:[(0,a.jsxs)("div",{className:"rounded-2xl bg-white/90 px-4 py-3 shadow-inner",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Personen im Raum"}),(0,a.jsx)("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:l.people})]}),(0,a.jsxs)("div",{className:"rounded-2xl bg-white/90 px-4 py-3 shadow-inner",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Kapazit\xe4t"}),(0,a.jsx)("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:l.capacity})]}),(0,a.jsxs)("div",{className:"rounded-2xl bg-white/90 px-4 py-3 shadow-inner",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Freie Pl\xe4tze"}),(0,a.jsx)("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:M})]})]})]})]}),(0,a.jsx)("div",{className:"mt-6 h-2 w-full rounded-full bg-slate-200",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r ".concat(k.gradient),style:{width:"".concat(Math.min(D,100),"%")},"aria-hidden":"true"})})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm sm:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-baseline sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900 sm:text-xl",children:"Tagesverlauf & Prognose"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Vergleich von Live-Daten und erwarteter Auslastung."})]}),(0,a.jsxs)("span",{className:"text-xs uppercase tracking-wide text-slate-400",children:["Stand: ",I]})]}),(0,a.jsx)("div",{className:"mt-6 h-72 w-full sm:h-80",children:(0,a.jsx)(i.u,{width:"100%",height:"100%",children:(0,a.jsxs)(c.E,{data:L,barCategoryGap:24,children:[(0,a.jsx)(x.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,a.jsx)(m.W,{dataKey:"time",stroke:"#64748b"}),(0,a.jsx)(u.h,{stroke:"#64748b",allowDecimals:!1,domain:[0,l.capacity]}),(0,a.jsx)(h.m,{content:e=>{let{active:t,payload:s,label:l}=e;if(!t||!(null==s?void 0:s.length))return null;let r=s[0].payload,i=r.live+r.forecast;return(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-600 shadow-xl",children:[(0,a.jsxs)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:[l," Uhr"]}),(0,a.jsxs)("p",{className:"mt-1 font-semibold text-slate-900",children:[i," Personen erwartet"]}),r.live>0&&(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Live: ",r.live," Personen"]}),r.forecast>0&&"past"!==r.phase&&(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Prognose: ",i," Personen"]})]})},cursor:{fill:"#f8fafc"}}),(0,a.jsx)(p.e,{y:l.capacity,stroke:"#94a3b8",strokeDasharray:"4 4",label:{position:"top",value:"Kapazit\xe4t",fill:"#64748b",fontSize:12}}),(0,a.jsx)(f.y,{dataKey:"forecast",stackId:"util",name:"Prognose",radius:[6,6,0,0],children:L.map(e=>(0,a.jsx)(d.f,{fill:e.isCurrent?"#bae6fd":"future"===e.phase?"#e0f2fe":"#e2e8f0"},"forecast-".concat(e.time)))}),(0,a.jsx)(f.y,{dataKey:"live",stackId:"util",name:"Live",radius:[6,6,0,0],children:L.map(e=>(0,a.jsx)(d.f,{fill:k.pieFill,fillOpacity:+(e.live>0)},"live-".concat(e.time)))})]})})})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm sm:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-baseline sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900 sm:text-xl",children:"Freie Slots buchen"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"W\xe4hle ein passendes Zeitfenster, um diesen Raum zu reservieren."})]}),(0,a.jsx)("button",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-600 shadow-sm transition hover:border-sky-200 hover:text-sky-700",children:"Alle Buchungen ansehen"})]}),(0,a.jsx)("div",{className:"mt-5 grid gap-3 sm:grid-cols-3",children:F.map(e=>(0,a.jsxs)("button",{type:"button",className:"flex flex-col gap-3 rounded-2xl border border-slate-200 bg-slate-50/80 px-4 py-4 text-left text-sm text-slate-600 shadow-sm transition hover:border-sky-200 hover:bg-white",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-slate-900",children:[e.start," – ",e.end," Uhr"]}),(0,a.jsxs)("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:[e.expected," Personen erwartet"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold",children:[(0,a.jsxs)("span",{className:"text-emerald-600",children:[e.free," freie Pl\xe4tze"]}),(0,a.jsx)("span",{className:"rounded-full bg-slate-900/80 px-3 py-1 text-white",children:"Slot w\xe4hlen"})]})]},e.id))})]})]})}},3518:(e,t,s)=>{Promise.resolve().then(s.bind(s,2872))}},e=>{e.O(0,[619,519,371,441,255,358],()=>e(e.s=3518)),_N_E=e.O()}]);