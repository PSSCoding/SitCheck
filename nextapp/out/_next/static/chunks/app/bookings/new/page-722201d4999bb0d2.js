(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},134:(e,t,s)=>{Promise.resolve().then(s.bind(s,6563))},2708:(e,t,s)=>{"use strict";s.d(t,{dp:()=>u,lK:()=>o});var a=s(5155),n=s(2115);let r=(0,n.createContext)(null),l=[7,3,11],i=()=>[{id:1,roomId:7,roomName:"Gruppenraum B",category:"Gruppenr\xe4ume",dayOffset:0,hour:13,minute:30,durationMinutes:90,status:"Best\xe4tigt",notes:"Projektbesprechung mit dem Tutorium."},{id:2,roomId:3,roomName:"Lesesaal 3",category:"Leses\xe4le",dayOffset:1,hour:9,minute:0,durationMinutes:120,status:"Option",notes:"Pr\xfcfungsvorbereitung Informatik."},{id:3,roomId:11,roomName:"Seitenbank 1",category:"Seitenb\xe4nke",dayOffset:-1,hour:18,minute:0,durationMinutes:60,status:"Abgeschlossen",notes:"Konzentrationsphase vor dem Vortrag."}].map(e=>{let t=new Date;t.setHours(0,0,0,0),t.setDate(t.getDate()+e.dayOffset),t.setHours(e.hour,e.minute,0,0);let s=new Date(t.getTime()+60*e.durationMinutes*1e3);return{id:e.id,roomId:e.roomId,roomName:e.roomName,category:e.category,startDateTime:t.toISOString(),endDateTime:s.toISOString(),status:e.status,notes:e.notes}});function o(e){let{children:t}=e,[s,o]=(0,n.useState)(l),[u,d]=(0,n.useState)(i),c=(0,n.useCallback)(e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),m=(0,n.useCallback)(e=>{d(t=>t.filter(t=>t.id!==e))},[]),p=(0,n.useMemo)(()=>({favorites:s,toggleFavorite:c,bookings:u,setBookings:d,cancelBooking:m}),[s,c,u,d,m]);return(0,a.jsx)(r.Provider,{value:p,children:t})}function u(){let e=(0,n.useContext)(r);if(!e)throw Error("useAppData must be used within an AppDataContext provider");return e}},3581:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});let a=[{id:1,name:"Lesesaal 1",people:5,capacity:50,type:"Leses\xe4le"},{id:2,name:"Lesesaal 2",people:20,capacity:40,type:"Leses\xe4le"},{id:3,name:"Lesesaal 3",people:12,capacity:40,type:"Leses\xe4le"},{id:4,name:"Lesesaal 4",people:30,capacity:50,type:"Leses\xe4le"},{id:5,name:"Lesesaal 5",people:10,capacity:50,type:"Leses\xe4le"},{id:6,name:"Gruppenraum A",people:8,capacity:10,type:"Gruppenr\xe4ume"},{id:7,name:"Gruppenraum B",people:10,capacity:10,type:"Gruppenr\xe4ume"},{id:8,name:"Gruppenraum C",people:4,capacity:10,type:"Gruppenr\xe4ume"},{id:9,name:"Gruppenraum D",people:9,capacity:12,type:"Gruppenr\xe4ume"},{id:10,name:"Gruppenraum E",people:7,capacity:10,type:"Gruppenr\xe4ume"},{id:11,name:"Seitenbank 1",people:2,capacity:4,type:"Seitenb\xe4nke"},{id:12,name:"Seitenbank 2",people:3,capacity:4,type:"Seitenb\xe4nke"},{id:13,name:"Seitenbank 3",people:1,capacity:4,type:"Seitenb\xe4nke"},{id:14,name:"Seitenbank 4",people:4,capacity:4,type:"Seitenb\xe4nke"},{id:15,name:"Seitenbank 5",people:2,capacity:4,type:"Seitenb\xe4nke"}]},6563:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),n=s(2115),r=s(63),l=s(3581),i=s(2708);let o=[{label:"30 Minuten",value:30},{label:"60 Minuten",value:60},{label:"90 Minuten",value:90},{label:"120 Minuten",value:120}];function u(){var e,t;let{bookings:s,setBookings:u}=(0,i.dp)(),d=(0,r.useRouter)(),c=(0,n.useMemo)(()=>new Date().toISOString().split("T")[0],[]),[m,p]=(0,n.useState)({roomId:null!=(t=null==(e=l.L[0])?void 0:e.id)?t:1,date:c,startTime:"12:00",duration:60,status:"Anfrage",notes:""}),[x,g]=(0,n.useState)(null),f=(0,n.useMemo)(()=>l.L.reduce((e,t)=>(e[t.type]||(e[t.type]=[]),e[t.type].push(t),e),{}),[]),b=e=>t=>{let s="duration"===e?Number(t.target.value):t.target.value;p(t=>({...t,[e]:s}))};return(0,a.jsxs)("div",{className:"mx-auto flex w-full max-w-3xl flex-col gap-8 px-4 pb-10 pt-6 sm:px-6 sm:pt-8",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900 sm:text-3xl",children:"Unverbindliche Buchung anlegen"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Reserviere dir einen Raum im Lesesaal f\xfcr einen gew\xfcnschten Zeitraum. Die Anfrage wird lokal gespeichert und kann sp\xe4ter an das Backend \xfcbergeben werden."}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-slate-500",children:[(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-sky-100 px-3 py-1 font-semibold text-sky-700",children:"Schritt 1 \xb7 Anfrage erstellen"}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-slate-200 px-3 py-1 font-semibold text-slate-700",children:"Schritt 2 \xb7 Best\xe4tigung folgt"})]})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=l.L.find(e=>e.id===Number(m.roomId));if(!t)return;let[a,n]=m.startTime.split(":").map(Number),r=new Date(m.date);r.setHours(a,n,0,0);let i=new Date(r.getTime()+60*m.duration*1e3),o={id:s.reduce((e,t)=>Math.max(e,t.id),0)+1,roomId:t.id,roomName:t.name,category:t.type,startDateTime:r.toISOString(),endDateTime:i.toISOString(),status:m.status,notes:m.notes};u([...s,o]),g(o)},className:"space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm sm:p-7",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Kategorie & Raum"}),(0,a.jsx)("select",{value:m.roomId,onChange:b("roomId"),className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 shadow-inner focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:Object.entries(f).map(e=>{let[t,s]=e;return(0,a.jsx)("optgroup",{label:t,children:s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," \xb7 ",e.capacity," Pl\xe4tze"]},e.id))},t)})})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Datum"}),(0,a.jsx)("input",{type:"date",min:c,value:m.date,onChange:b("date"),className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 shadow-inner focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Startzeit"}),(0,a.jsx)("input",{type:"time",value:m.startTime,onChange:b("startTime"),className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 shadow-inner focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Dauer"}),(0,a.jsx)("select",{value:m.duration,onChange:b("duration"),className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 shadow-inner focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:o.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Status"}),(0,a.jsxs)("select",{value:m.status,onChange:b("status"),className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 shadow-inner focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[(0,a.jsx)("option",{value:"Anfrage",children:"Anfrage"}),(0,a.jsx)("option",{value:"Option",children:"Option"}),(0,a.jsx)("option",{value:"Best\xe4tigt",children:"Best\xe4tigt"})]})]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Notiz"}),(0,a.jsx)("textarea",{value:m.notes,onChange:b("notes"),rows:3,placeholder:"Welche Gruppe nutzt den Raum? Ben\xf6tigte Ausstattung?",className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm font-medium text-slate-700 shadow-inner focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Deine Anfrage wird lokal gespeichert. Du kannst sie sp\xe4ter \xfcber „Buchungen verwalten“ bearbeiten oder stornieren."}),(0,a.jsx)("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-sky-500 px-5 py-2 font-semibold text-white shadow-sm transition hover:bg-sky-600",children:"Anfrage speichern"})]})]}),x&&(0,a.jsxs)("div",{className:"space-y-3 rounded-3xl border border-emerald-200 bg-emerald-50 p-6 text-sm text-emerald-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-emerald-800",children:"Anfrage gespeichert!"}),(0,a.jsx)("button",{type:"button",onClick:()=>{g(null),d.push("/bookings")},className:"inline-flex items-center gap-2 rounded-full border border-emerald-300 bg-white/80 px-3 py-1 text-xs font-semibold text-emerald-700 transition hover:border-emerald-400",children:"Zu meinen Buchungen"})]}),(0,a.jsxs)("p",{children:[x.roomName," \xb7 ",new Date(x.startDateTime).toLocaleDateString("de-DE",{weekday:"long",day:"numeric",month:"long"})]}),(0,a.jsxs)("p",{children:["Zeitraum: ",new Date(x.startDateTime).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})," ","–"," ",new Date(x.endDateTime).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})," ","Uhr"]})]})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=134)),_N_E=e.O()}]);